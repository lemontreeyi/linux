(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{121:function(t,r,e){"use strict";e.d(r,"b",(function(){return n})),e.d(r,"a",(function(){return a})),e.d(r,"d",(function(){return o})),e.d(r,"c",(function(){return i}));e(17);const n=e(0).r?"serviceworker":"background";let a=!1;"background"===n?a="undefined"==typeof ServiceWorkerGlobalScope&&chrome.extension.getBackgroundPage()===window:"serviceworker"===n&&(a="undefined"!=typeof ServiceWorkerGlobalScope);const o={timeout:0,taskId:""},i=()=>(""+Date.now()/1e3/1e5).split(".")[1].substr(0,8)+(""+Math.random()).split(".")[1].substr(0,8).padEnd(8,"0")},188:function(t,r,e){"use strict";e.r(r),e.d(r,"imgConfig",(function(){return s})),e.d(r,"getRandomWallpaper",(function(){return u})),e.d(r,"getBingWallpaper",(function(){return l})),e.d(r,"getWallpapers",(function(){return d})),e.d(r,"likeWallpaper",(function(){return f})),e.d(r,"collectionWallpaper",(function(){return p})),e.d(r,"addCustomColor",(function(){return w})),e.d(r,"setCustomColorItems",(function(){return h})),e.d(r,"getCustomColor",(function(){return y})),e.d(r,"removeCustomColor",(function(){return g})),e.d(r,"uploadWallpaper",(function(){return m})),e.d(r,"getWallpapersById",(function(){return _})),e.d(r,"createWallpaperLibrary",(function(){return b})),e.d(r,"getUserWallpaperLibrary",(function(){return v})),e.d(r,"hasWallpaperLibrary",(function(){return k})),e.d(r,"getLikedWallpaper",(function(){return T})),e.d(r,"getCollectionWallpaper",(function(){return x})),e.d(r,"getWallpaperLibraryItems",(function(){return S})),e.d(r,"getUserWallpaperLibraryItemsById",(function(){return I})),e.d(r,"removeWallpaperLibraryItem",(function(){return B})),e.d(r,"removeWallpaperLibrary",(function(){return O})),e.d(r,"addImagesToLibrary",(function(){return j})),e.d(r,"renameWallpaperLibrary",(function(){return C})),e.d(r,"getNextWallpaper",(function(){return E})),e.d(r,"convertURL",(function(){return U}));e(10),e(52);var n=e(0),a=e(4),o=e(23);const i=Math.floor(screen.width*window.devicePixelRatio),c=Math.floor(203*window.devicePixelRatio),s={smallWidth:c>2560?2560:c,normalWidth:i>2560?2560:i,format:o.c?"":"format/webp/"},u=async()=>{try{const t=await a.a.get(n.v+"/random-wallpaper",{_:(new Date).getTime()});if(!t.success)throw t;const{src:r,_id:e,source:o}=t.data[0],{url:i,rawUrl:c}=U(r.rawSrc);return{data:{url:i,rawUrl:c,id:e,source:o}}}catch(t){return{error:t}}},l=async()=>{try{const t=await a.a.get(n.w+"/get_bing_wallpaper",null,{_single:"getBingWallpaper"});if(t.error)throw t.error;const{data:r}=t,{content:e,url:o,rawUrl:i}=U(r.src.rawSrc);return r.thumbnail=e,r.url=o,r.rawUrl=i,t}catch(t){return{error:t}}},d=async t=>{const{source:r}=t;t.source="all"===r?"":r;try{const r=await a.a.get(n.v+"/get-wallpaper",t,{_single:"getWallpapers"}),{data:e}=r;return e.forEach(t=>{const{content:r,url:e,rawUrl:n}=U(t.src.rawSrc);t.thumbnail=r,t.url=e,t.rawUrl=n}),{result:r}}catch(t){return{error:t}}},f=async(t,r)=>{try{const e=await a.a.post(n.w+"/like_wallpaper",{id:t,state:r},{_auth:!0});if(0!==e.code)throw e;return e}catch(t){return{error:t}}},p=async(t,r)=>{try{const e=await a.a.post(n.w+"/collection_wallpaper",{id:t,state:r},{_auth:!0});if(0!==e.code)throw e;return e}catch(t){return{error:t}}},w=async t=>{try{const r=await a.a.post(n.w+"/add_custom_color",Object.assign(Object.assign({},t),{newVer:!0}),{_auth:!0});if(0!==r.code)throw r;return r}catch(t){return{error:t}}},h=async t=>{try{const r=await a.a.post(n.w+"/set_custom_color_items",t,{_auth:!0});if(0!==r.code)throw r;return r}catch(t){return{error:t}}},y=async()=>{try{const t=await a.a.get(n.w+"/get_custom_color",null,{_auth:!0});if(0!==t.code)throw t;return t}catch(t){return{error:t}}},g=async t=>{try{const r=await a.a.post(n.w+"/remove_custom_color",{id:t,newVer:!0},{_auth:!0});if(0!==r.code)throw r;return r}catch(t){return{error:t}}},m=async t=>{try{const r=await a.a.post(n.w+"/upload_wallpaper",t,{headers:{"Content-Type":"multipart/form-data"}});if(0!==r.code)throw r;return{data:r.data}}catch(t){return{error:t}}},_=async t=>{try{const r=await a.a.get(n.w+"/get_wallpapers_by_id",{id:t});if(0!==r.code)throw r;const{data:e}=r;return e.forEach(t=>{const{content:r,url:e,rawUrl:n}=U(t.src.rawSrc);t.thumbnail=r,t.url=e,t.rawUrl=n}),{data:e}}catch(t){return{error:t}}},b=async({libraryName:t,libraryId:r,wallpapers:e})=>{try{return await a.a.post(n.w+"/create_wallpaper_library",{libraryName:t,libraryId:r,wallpapers:e},{_auth:!0})}catch(t){return{error:t}}},v=async()=>await a.a.get(n.w+"/get_user_wallpaper_library",null,{_auth:!0}),k=async t=>{try{return await a.a.get(n.w+"/has_wallpaper_library",{libraryId:t},{_auth:!0,_proxy:!0})}catch(t){return{error:t}}},T=async()=>{try{return await a.a.get(n.w+"/get_liked_wallpaper",null,{_auth:!0})}catch(t){return{error:t}}},x=async()=>{try{return await a.a.get(n.w+"/get_collection_wallpaper",null,{_auth:!0})}catch(t){return{error:t}}},S=async t=>{const r=await a.a.get(n.w+"/get_user_wallpaper_library_items",{libraryId:t});r.data.map(t=>{const{content:r,url:e,rawUrl:n}=U(t.url);return t.content=r,t.url=e,t.rawUrl=n,t});const{data:e}=r;return r.data={items:e,count:e.length},r.data},I=async t=>{try{const r=await a.a.get(n.w+"/get_user_wallpaper_library_items_by_id",{libraryItemsId:t}),{data:e}=r;return r.data={items:e,count:e.length},r.data}catch(t){return{error:t}}},B=async(t,r,e)=>{try{return await a.a.post(n.w+"/remove_wallpaper_library_item",{libraryId:t,libraryItemId:r,ext:e},{_auth:!0})}catch(t){return{error:t}}},O=async t=>{try{return await a.a.post(n.w+"/remove_wallpaper_library",{libraryId:t},{_auth:!0})}catch(t){return{error:t}}},j=async(t,r)=>{try{return await a.a.post(n.w+"/add_images_to_library",{libraryId:t,wallpapers:r},{_auth:!0})}catch(t){return{error:t}}},C=async(t,r)=>{try{return await a.a.post(n.w+"/rename_wallpaper_library",{libraryId:t,libraryName:r},{_auth:!0})}catch(t){return{error:t}}},E=async(t,r,e="library")=>{const o={source:t,type:e};r&&(o._id=r);const i=await a.a.get(n.w+"/get_next_wallpaper",o,{_single:"getNextWallpaper"});if(0!==i.code)throw new Error;const{data:c}=i,{content:s,url:u,rawUrl:l}=U(c.rawUrl);return c.thumbnail=s,c.url=u,c.rawUrl=l,i},U=t=>({rawUrl:t,url:`${t}?imageView2/2/w/${s.normalWidth}/${s.format}interlace/1`,content:`${t}?imageView2/2/w/${s.smallWidth}/${s.format}interlace/1`})},22:function(t,r,e){"use strict";e.d(r,"c",(function(){return s})),e.d(r,"d",(function(){return u})),e.d(r,"b",(function(){return l})),e.d(r,"e",(function(){return d})),e.d(r,"f",(function(){return f})),e.d(r,"g",(function(){return p})),e.d(r,"a",(function(){return w}));var n=e(7),a=e.n(n),o=(e(10),e(13),e(16),e(0)),i=e(26),c=e.n(i);function s(t,r){if(o.l){if(t=window.chrome.runtime.getURL(t),null==r?void 0:r.isNewTab)return window.chrome.tabs.create({url:t});window.chrome.tabs.getCurrent(r=>window.chrome.tabs.update(r.id,{url:t},()=>{chrome.runtime.lastError&&t&&(t.startsWith("http")?window.open(t,"_self"):window.chrome.tabs.create({url:t}))}))}else{if(null==r?void 0:r.isNewTab)return window.open(t);window.open(t,"_self")}}async function u(){if(o.l){const{slave:t}=await e.e(12).then(e.bind(null,177));window.chrome.tabs.getCurrent(r=>{t.sendMessage("tabs-reload"),setTimeout(()=>{window.chrome.tabs.remove(r.id)},16)})}else setTimeout(()=>{s("/")},16)}async function l(t,r){try{if(r){return await c.a.getItem(t)}{const r=localStorage.getItem(t);if(r)return"string"==typeof r?JSON.parse(r):r}}catch(t){throw new Error(t)}}async function d(t,r,e){e?await c.a.setItem(t,r):localStorage.setItem(t,JSON.stringify(r))}async function f(t,r,e=!1){const n=await l(t,e);if(n&&Object.keys(n).length){d(t,Object.assign({},n,r),e)}else d(t,r,e)}async function p(t,r){const{autoBackupPipe:e}=await l("store-sync",!0);e.data[t]=r,e.timestamp=Date.now(),e.websocketKeys.includes(t)||e.websocketKeys.push(t),await f("store-sync",{autoBackupPipe:e},!0)}async function w(){const t=await new a.a(t=>chrome.bookmarks.getTree(t));if(o.n){const r=t[0].children.findIndex(t=>"unfiled_____"===t.id),e=t[0].children.findIndex(t=>"toolbar_____"===t.id);if(-1!==r&&-1!==e)if(r>e){const[n]=t[0].children.splice(r,1),[a]=t[0].children.splice(e,1);t[0].children.unshift(a,n)}else{const[n]=t[0].children.splice(e,1),[a]=t[0].children.splice(r,1);t[0].children.unshift(n,a)}}return t}},239:function(t,r){var e=1;function n(t){var r=[];for(var e in t)r.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return r.join("&")}t.exports=function(t){return new Promise((function(r,a){var o=document.createElement("script"),i=t.url;if(t.params){var c=n(t.params);c&&(i+=(i.indexOf("?")>=0?"&":"?")+c)}function s(){o&&(o.onload=o.onreadystatechange=o.onerror=null,o.parentNode&&o.parentNode.removeChild(o),o=null)}o.async=!0;var u="axiosJsonpCallback"+e++,l=window[u],d=!1;window[u]=function(t){(window[u]=l,d)||r({data:t,status:200})};var f={_:(new Date).getTime()};f[t.callbackParamName||"callback"]=u,i+=(i.indexOf("?")>=0?"&":"?")+n(f),o.onload=o.onreadystatechange=function(){o.readyState&&!/loaded|complete/.test(o.readyState)||s()},o.onerror=function(){s(),a(new Error("Network Error"))},t.cancelToken&&t.cancelToken.promise.then((function(t){o&&(d=!0,a(t))})),o.src=i,document.head.appendChild(o)}))}},243:function(t,r,e){"use strict";var n=e(46),a=e(19),o=e(3),i=e(11),c=e(15),s=e(20).f,u=e(122),l=o.Symbol;if(a&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),r=this instanceof f?new l(t):void 0===t?l():l(t);return""===t&&(d[r]=!0),r};u(f,l);var p=f.prototype=l.prototype;p.constructor=f;var w=p.toString,h="Symbol(test)"==String(l("test")),y=/^Symbol\((.*)\)[^)]+$/;s(p,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,r=w.call(t);if(i(d,t))return"";var e=h?r.slice(7,-1):r.replace(y,"$1");return""===e?void 0:e}}),n({global:!0,forced:!0},{Symbol:f})}},245:function(t,r,e){t.exports=e(349)},251:function(t,r,e){"use strict";e.r(r),e.d(r,"uploadFile",(function(){return c}));e(10);var n=e(0),a=e(4);const o=["infinity-notes-img","custom-wallpaper-library"],i={},c=async(t,r,e)=>{let c;try{if(i[e]&&i[e].endTime>Date.now())c=i[e];else{let t=null;if(t=o.includes(e)?await a.a.get(n.w+"/upload/public_private_token",{type:e},{_auth:!0}):await a.a.get(n.w+"/upload/token",{type:e}),0!==t.code||!t.data.token)return{error:t};c=t.data,c.endTime=Date.now()+1e3*(c.expires-600),i[e]=c}const{token:s,prefix:u}=c,l=new FormData;l.append("token",s),l.append("key",u+r),l.append("file",t,r);const{key:d,url:f}=await a.a.post(c.host,l,{timeout:18e4,headers:{"Content-Type":"multipart/form-data"}});return{data:{url:f,key:d}}}catch(t){return{error:t}}}},252:function(t,r){var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var r=[],e=0;e<t.length;e++)r.push(255&t.charCodeAt(e));return r},bytesToString:function(t){for(var r=[],e=0;e<t.length;e++)r.push(String.fromCharCode(t[e]));return r.join("")}}};t.exports=e},253:function(t,r,e){"use strict";e.d(r,"a",(function(){return n}));e(13),e(16);class n{constructor(){this._events=new Map}listenTask(t,r){if("function"!=typeof r)return;this._events.has(t)||this._events.set(t,new Set);this._events.get(t).add(r)}execTask(t,r,...e){if(this._events.has(t)){const n=this._events.get(t);for(const t of n)t(r,...e)}}}},347:function(t,r){var e,n;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,r){return t<<r|t>>>32-r},rotr:function(t,r){return t<<32-r|t>>>r},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var r=0;r<t.length;r++)t[r]=n.endian(t[r]);return t},randomBytes:function(t){for(var r=[];t>0;t--)r.push(Math.floor(256*Math.random()));return r},bytesToWords:function(t){for(var r=[],e=0,n=0;e<t.length;e++,n+=8)r[n>>>5]|=t[e]<<24-n%32;return r},wordsToBytes:function(t){for(var r=[],e=0;e<32*t.length;e+=8)r.push(t[e>>>5]>>>24-e%32&255);return r},bytesToHex:function(t){for(var r=[],e=0;e<t.length;e++)r.push((t[e]>>>4).toString(16)),r.push((15&t[e]).toString(16));return r.join("")},hexToBytes:function(t){for(var r=[],e=0;e<t.length;e+=2)r.push(parseInt(t.substr(e,2),16));return r},bytesToBase64:function(t){for(var r=[],n=0;n<t.length;n+=3)for(var a=t[n]<<16|t[n+1]<<8|t[n+2],o=0;o<4;o++)8*n+6*o<=8*t.length?r.push(e.charAt(a>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,a=0;n<t.length;a=++n%4)0!=a&&r.push((e.indexOf(t.charAt(n-1))&Math.pow(2,-2*a+8)-1)<<2*a|e.indexOf(t.charAt(n))>>>6-2*a);return r}},t.exports=n},348:function(t,r){function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},349:function(t,r,e){var n=e(350);t.exports=n},350:function(t,r,e){e(238);var n=e(351),a=e(124),o=Array.prototype,i={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var r=t.keys;return t===o||t instanceof Array&&r===o.keys||i.hasOwnProperty(a(t))?n:r}},351:function(t,r,e){var n=e(352);t.exports=n},352:function(t,r,e){e(189);var n=e(176);t.exports=n("Array").keys},4:function(t,r,e){"use strict";e.d(r,"b",(function(){return _})),e.d(r,"a",(function(){return b}));e(17),e(10),e(13),e(16);var n=e(7),a=e.n(n),o=e(105),i=e.n(o),c=e(0),s=e(8);const u=i.a.create({timeout:3e4});let l=!1;const d=[],f=()=>new a.a(async(t,r)=>{if(d.push({resolve:t,reject:r}),!l){l=!0;try{const{userStore:t}=await Promise.all([e.e(0),e.e(5),e.e(6),e.e(7),e.e(36)]).then(e.bind(null,468)),{refreshToken:r}=t;if(!r)return t.setOutdated(),l=!1,void d.forEach(t=>{t.reject(new Error("no refreshtoken"))});const{status:n,data:a}=await u.post(c.w+"/refresh_token",{refresh_token:r},{headers:{"i-lang":c.B.lang}});if(200===n&&0===a.code){const{token:r,refreshToken:e}=a.data;Object(s.i)(()=>{t.token=r,t.refreshToken=e}),l=!1,d.forEach(t=>{t.resolve(r)})}else{if(200!==n||3010!==a.code&&3012!==a.code)throw new Error(null==a?void 0:a.message);t.setOutdated(),l=!1,d.forEach(t=>{t.reject(a.message)})}}catch(t){l=!1,d.forEach(r=>{r.reject(t)})}}});var p=e(21);e(52);const w=["params","data","_auth"],h=async t=>{const{slave:r}=await e.e(12).then(e.bind(null,177)),n=((t,r={})=>{const e=Object.keys(r).map(t=>`${t}=${encodeURIComponent(r[t])}`);return e.length?t.includes("?")?t+e.join("&"):t+"?"+e.join("&"):t})(t.url,t.params),{request:a,option:o}=(t=>{const r={},e={};return t.data&&!r.body&&(r.body=JSON.stringify(t.data)),Object.keys(t).forEach(n=>{w.includes(n)||(n.startsWith("_")?e[n]=t[n]:r[n]=t[n])}),{request:r,option:e}})(t);return r.postTask("slave:fetch",{url:n,request:a,option:o})},y=i.a.CancelToken,g=i.a.create({timeout:6e4});g.interceptors.response.use(null,t=>(t.message=i18n("network_error"),a.a.reject(t)));const m=Object.create(null),_=t=>{m[t]&&m[t]()},b=async t=>{if(t._single){const r=(t=>{let r;return r=!0===t._single?t.method+"-"+t.url.split("?")[0]:t._single,r})(t);m[r]&&m[r](),t.cancelToken=new y(t=>{m[r]=t})}var r;t._delay&&await(r=t._delay,new a.a(t=>{setTimeout(t,r)}));const n={};if(t._auth){const{userStore:r}=await Promise.all([e.e(0),e.e(29)]).then(e.bind(null,364));if(!r||!r.token)throw new Error("error token");{const e=p.a.parseJwt(r.token),a=await p.a.getTimestamp();if(t._Authorization)n.Authorization=t._Authorization,n["i-token"]=t._Authorization;else if(Math.floor(a/1e3)>e.exp-60){const t=await f();n.Authorization="Bearer "+t,n["i-token"]="Bearer "+t}else n.Authorization="Bearer "+r.token,n["i-token"]="Bearer "+r.token}}let o;if(t.url.includes(c.w)&&(n["i-lang"]=c.B.lang,n["i-edition"]=c.e,n["i-version"]=c.B.extVersion),t.headers=Object.assign(Object.assign({},n),t.headers),o=t._proxy?await h(t):await g(t),t._responseAll)return o;let{data:i}=o;if(!t._Authorization&&3010===(null==i?void 0:i.code)){const r=await f();t._Authorization="Bearer "+r,delete t.headers.Authorization,delete t.headers["i-token"],i=await b(t)}return i};["get","delete"].forEach(t=>{b[t]=(r,e,n={})=>b(Object.assign({url:r,params:e,method:t},n))}),["post","patch","put"].forEach(t=>{b[t]=(r,e,n={})=>b(Object.assign({url:r,data:e,method:t},n))}),b.jsonp=(t,r,e={})=>b(Object.assign({url:t,params:r},e))},81:function(t,r,e){"use strict";e.d(r,"i",(function(){return n})),e.d(r,"d",(function(){return a})),e.d(r,"h",(function(){return B})),e.d(r,"b",(function(){return o})),e.d(r,"a",(function(){return i})),e.d(r,"g",(function(){return c})),e.d(r,"e",(function(){return u})),e.d(r,"f",(function(){return vt})),e.d(r,"c",(function(){return s}));var n={};e.r(n),e.d(n,"getLocalCity",(function(){return f})),e.d(n,"getForecastWeather",(function(){return p})),e.d(n,"getCityList",(function(){return w}));var a={};e.r(a),e.d(a,"getSearchSuggest",(function(){return b})),e.d(a,"getEnginesList",(function(){return v}));var o={};e.r(o),e.d(o,"getIcon",(function(){return P})),e.d(o,"getUrlInfoWithPermission",(function(){return q})),e.d(o,"getUrlIcon",(function(){return R})),e.d(o,"getFetchiconUrls",(function(){return $}));var i={};e.r(i),e.d(i,"getUnreadEmails",(function(){return J}));var c={};e.r(c),e.d(c,"register",(function(){return K})),e.d(c,"login",(function(){return X})),e.d(c,"updateProfile",(function(){return Z})),e.d(c,"getUserProfile",(function(){return Y})),e.d(c,"uploadAvatar",(function(){return Q})),e.d(c,"modifyPassword",(function(){return tt})),e.d(c,"forgetPassword",(function(){return rt})),e.d(c,"resetPassword",(function(){return et})),e.d(c,"getCode",(function(){return nt})),e.d(c,"getRegisterCode",(function(){return at})),e.d(c,"inspceCode",(function(){return ot})),e.d(c,"checkTokenIsExpired",(function(){return it})),e.d(c,"deleteAccount",(function(){return ct})),e.d(c,"loginWithUid",(function(){return st})),e.d(c,"v1BasicLogin",(function(){return ut})),e.d(c,"getMobileUid",(function(){return lt}));var s={};e.r(s),e.d(s,"getRepairConcat",(function(){return dt})),e.d(s,"postErrorCollect",(function(){return ft})),e.d(s,"sendLog",(function(){return pt}));var u={};e.r(u),e.d(u,"getSyncList",(function(){return yt})),e.d(u,"getSyncDetail",(function(){return gt})),e.d(u,"autoBackup",(function(){return mt})),e.d(u,"manualBackup",(function(){return _t})),e.d(u,"getV2DataFromV1",(function(){return bt}));e(10);var l=e(0),d=e(4);const f=async()=>{try{const t=await d.a.get(l.y+"/city/locate",{lang:l.B.lang},{timeout:1e4});if(t&&t.city)return{data:t.city}}catch(t){return{error:t}}},p=async t=>{try{return{data:(await d.a.get(l.y+"/weather/forecast",{lang:l.B.lang,cid:t},{timeout:1e4})).forecast}}catch(t){return{error:t}}},w=async t=>{try{return{data:await d.a.get(l.y+"/city/list",{lang:l.B.lang,searchkey:t},{timeout:1e4})}}catch(t){return{error:t}}};e(17);var h=e(21),y=e(99),g=e.n(y),m=e(239),_=e.n(m);const b=async t=>l.B.isZh?l.h||l.r?T(t):S(t):l.h||l.r?x(t):I(t),v=async t=>{let r=l.q?36e5:6e4;t||(r=0);try{if(!h.a.requestFirefoxThrottle("/search/list",r,!0))return{error:"request throttle error"};const e=await d.a.get(l.w+"/search/list",{lang:l.B.lang,platform:l.B.platform,platformVersion:l.B.platformVersion,edition:l.e,maybe360:l.D,version:t||""+Date.now()});if(0===e.code){const t=e.data.map(t=>{const r={};return r.name=t.name,r.uuid=t.seId,r.logo=t.logo,r.desc=t.desc,r.types=t.types,r.hide=t.hide,r});return h.a.requestFirefoxThrottle("/search/list",!0,!0),{data:{list:t,hash:g()(JSON.stringify(t)),meta:e.meta}}}if(2005===e.code)return h.a.requestFirefoxThrottle("/search/list",!0,!0),{error:e};throw e}catch(t){return{error:t}}},k=h.a.getLastReqValue(d.a.jsonp),T=async t=>{var r;try{const e=await k(l.b+"/su?ie=utf-8&p=3",{wd:t},{adapter:_.a,callbackParamName:"cb"});return{data:(null===(r=null==e?void 0:e.s)||void 0===r?void 0:r.map(t=>({text:t})))||[]}}catch(t){return{error:t}}},x=async t=>{var r;try{const e=await k(l.g+"/complete/search?client=chrome",{q:t},{adapter:_.a,callbackParamName:"jsonp"});return{data:(null==e?void 0:e.length)&&(null===(r=e[1])||void 0===r?void 0:r.length)?e[1].map(t=>({text:t})):[]}}catch(t){return{error:t}}},S=async t=>{try{const r=await d.a.get(l.b+"/su?p=3&ie=UTF-8&cb=",{wd:t},{_single:!0,_delay:0}),e=/s:(\[[\w\W]*\])/.exec(r),n=JSON.parse(e[1]);return{data:n.map(t=>({text:t}))}}catch(t){return{error:t}}},I=async t=>{try{const r=await d.a.get(l.g+"/complete/search?client=chrome",{q:t},{_single:!0,_delay:200});return{data:r[2].map((t,e)=>(t||(t=r[1][e]),{text:t}))}}catch(t){return{error:t}}};var B=e(188),O=e(7),j=e.n(O),C=e(104),E=e.n(C),U=e(48),W=e.n(U);e(52),e(243),e(13),e(16),e(44);const A=l.B.lang,P=async({page:t=0,type:r,keyword:e,source:n}={})=>{try{const a=await d.a.get(l.v+"/get-icons",{lang:A,page:t,type:r,source:n,keyword:e},{_single:!0,_delay:200});if(a.success)return a.icons.forEach(t=>{if("infinity"===t.source)switch("infinity://wallpaper"===t.url&&(t.name="wallpaper_library"),t.url){case"infinity://wallpaper":case"infinity://weather":case"infinity://todos":case"infinity://notes":case"infinity://history":case"infinity://bookmarks":case"infinity://settings":t.name=i18n(t.name),t.description=i18n(t.description);break;case"infinity://extension":t.name=i18n(t.name),t.description=i18n(t.description,l.B.vendor)}t._footer=t.description||i18n("no_description")}),{data:a};throw a}catch(t){return{error:t}}},N=async t=>{try{const r=await d.a.get(l.w+"/icon/title",{url:t},{_single:!0,_delay:0,timeout:3e3});if(0===r.code)return{data:{name:r.data.title}};throw r}catch(t){return{error:t}}},L=/<title[^>]*>\s*(.*)\s*<\/title>/,q=t=>window.__INFINITY__.hasAllUrlPermission?new j.a(async r=>{let e=0;N(t).then(t=>{e+=1,t.error&&2!==e||r(t)}),(async t=>{try{const r=await d.a.get(t,{},{_single:"getUrlInfoFromFE",timeout:3e3,responseType:"text",_responseAll:!0}),e=r.data;if(e&&r.status>=200&&r.status<300){const t=e.indexOf("<title");if(t>0){const r=e.slice(t,t+200),n=L.exec(r),a=null==n?void 0:n[1];if(a)return{data:{name:a}}}}return{error:"error"}}catch(t){return{error:t}}})(t).then(t=>{e+=1,t.error&&2!==e||r(t)})}):new j.a(async r=>{r(await N(t))}),D=(t,r)=>{if(0===r.length)return r;const e=new Map,n=[];return t.forEach((t,r)=>{e.set(t,r)}),r.forEach(t=>{const r=e.get(t);n[r]=t}),n.filter(t=>!!t)},M=t=>new j.a(r=>{const e=()=>{const r=D(t,o),e=D(t,i),n=D(t,c);return r.concat(e,n)},n=t.length;let a=0;const o=[],i=[],c=[];t.forEach(t=>{const s=new Image;s.onload=function(){a+=1;const{width:s,height:u}=this,l=Math.max(s,u),d=Math.min(s,u);l/d<5?d>50&&l>100?o.push(t):d>50||l>100?i.push(t):c.push(t):c.push(t),a===n&&r(e())},s.onerror=()=>{a+=1,a===n&&r(e())},s.src=t}),setTimeout(()=>{r(e())},3e3)}),F=/\.(ico|png|jpg|jpeg|svg|webp)$/,R=async t=>{var r;try{const e=await d.a.get(t,{},{_single:"getUrlIcon",timeout:3e3,responseType:"text",_responseAll:!0}),n=e.data;if(n&&e.status>=200&&e.status<300){const a=(null===(r=e.request)||void 0===r?void 0:r.responseURL)||t;let o=((t,r)=>{const e=[];return r.replace(/<link [^>]*href=['"]([^'"]+)[^>]*/gi,(t,r)=>{e.push(r)}),E()(e).call(e,(r,e)=>{if(e&&F.test(e)){const n=new W.a(e,t);r.push(n.href)}return r},[])})(a,n);if(o.length<6){const t=((t,r)=>{const e=[];return r.replace(/<img [^>]*src=['"]([^'"]+)[^>]*/gi,(t,r)=>{e.push(r)}),E()(e).call(e,(r,e)=>{if(e&&F.test(e)){const n=new W.a(e,t);r.push(n.href)}return r},[])})(a,n);o=o.concat(t)}o.length>4&&(o.length=4);let i=await M(o);return i=Array.from(new Set(i)),i.length>2&&(i.length=2),{data:i}}return{error:""}}catch(t){return{error:t}}},$=async t=>{try{const{host:r}=new W.a(t),e=await d.a.get(l.w+"/icon/get_icon_urls",{host:r});return 0!==e.code?{error:e}:{data:e.data.map(t=>t.url)}}catch(t){return{error:t}}};function z(t){return t?t.textContent:null}function J(t){return new j.a((r,e)=>{const n=new XMLHttpRequest;n.onreadystatechange=function(){var t,a;if(4==n.readyState)if(n.responseXML){const e=n.responseXML;let o=z(e.querySelector("title"));if(o)try{o=/(\w+)@(\w+\.\w+)/.exec(o)[0]}catch(t){}const i=parseInt(z(e.querySelector("fullcount")),10),c=e.querySelectorAll("entry"),s=[];let u=-1;for(let r=0,e=c.length;r<e;r++){const e=c[r],n={id:z(e.querySelector("id")),issued:z(e.querySelector("issued")),title:z(e.querySelector("title")),summary:z(e.querySelector("summary")),link:(t=e.querySelector("link"),a="href",t?t.getAttribute(a):null),authorName:z(e.querySelector("author name")),authorEmail:z(e.querySelector("author email"))};n.issued&&(n.issued=new Date(n.issued).valueOf(),u=Math.max(u,n.issued)),s.push(n)}r({account:o,lastIssuedTime:u,count:i,emails:s})}else e()},n.onerror=e,n.open("GET",function(t){return l.f+"/mail/feed/atom?zx="+encodeURIComponent(t)}(t),!0),n.send(null)})}var V=e(126),G=e.n(V),H=e(22);const K=async({email:t,password:r,repeatPassword:e,code:n})=>{const a={email:G()(t).call(t),password:g()(r),repeatPassword:g()(e),code:G()(n).call(n)};try{return await d.a.post(l.w+"/user/register",a)}catch(t){return t}},X=async({email:t,password:r})=>{const e={email:G()(t).call(t),password:g()(r)};try{return await d.a.post(l.w+"/user/login",e)}catch(t){return t}};async function Z(t){const r=(await Object(H.b)("store-user")).userInfo.uid;try{return await d.a.post(l.w+"/user/update_profile/"+r,t,{_auth:!0})}catch(t){throw new Error(t.message)}}async function Y(){try{return await d.a.get(l.w+"/user/get_user_profile",{},{_auth:!0,_proxy:!0})}catch(t){return t}}async function Q(t){const r=new FormData;r.append("file",t);try{const t=await d.a.post(l.w+"/upload/avatar",r,{_auth:!0,headers:{"Content-Type":"multipart/form-data"}});if(0===(null==t?void 0:t.code))return t;throw new Error(i18n("upload_avatar_failure"))}catch(t){throw new Error(t)}}async function tt({originPassword:t,newPassword:r}){const e=await Object(H.b)("store-user"),n=e.userInfo.uid,{token:a}=e;if(!a)throw new Error(i18n("unknown_mistake"));const o={originPassword:g()(t),newPassword:g()(r)};try{return await d.a.post(l.w+"/user/modify_password/"+n,o,{_auth:!0})}catch(t){return t}}async function rt(t){try{return await d.a.post(l.w+"/user/forget_password",t)}catch(t){return t}}async function et({password:t,repeatPassword:r,email:e,code:n}){const a={password:g()(t),repeatPassword:g()(r),email:G()(e).call(e),code:G()(n).call(n)};try{return await d.a.post(l.w+"/user/reset_password",a)}catch(t){return t}}async function nt(t){try{return await d.a.post(`${l.w}/get_code?lang=${l.B.lang}`,t)}catch(t){return t}}async function at(t){try{return await d.a.post(`${l.w}/get_register_code?lang=${l.B.lang}`,t)}catch(t){return t}}async function ot(t){try{return await d.a.post(l.w+"/inspce_code",t)}catch(t){return t}}async function it(){try{return await d.a.get(l.w+"/check_token",{},{_auth:!0})}catch(t){return t}}async function ct(){const t=(await Object(H.b)("store-user")).userInfo.uid;try{return await d.a.post(l.w+"/user/delete/"+t,{},{_auth:!0})}catch(t){return t}}const st=async t=>{try{return await d.a.post(l.w+"/user/login_uid",t,{timeout:1e4})}catch(t){return t}},ut=async t=>{try{return await d.a.post(l.w+"/user/v1_basic_login",t,{timeout:1e4})}catch(t){return t}},lt=async(t,r)=>{try{return await d.a.get(`${l.w}/user/user_hash?uid=${t}&secret=${r}`)}catch(t){return t}},dt=async()=>{try{const t=await d.a.get(l.w+"/get_concat_info");if(0===t.code)return{data:t.data};throw t}catch(t){return{error:t}}},ft=async(t,r)=>{try{const{response:e,stack:n,config:a}=r;let o=e||a;o&&(o=JSON.stringify(o,(t,r)=>{if(r instanceof FormData){const t={};for(const[e,n]of r)t[e]=n;return t}if(r instanceof File){return{lastModified:r.lastModified,name:r.name,size:r.size,type:r.type}}return r}));let i=await Object(H.b)("store-user");if(i){const t=["mobileuid","avatar","refreshToken","secret","gender","name"];i=JSON.stringify(i,(r,e)=>{if(!t.includes(r))return e})}const c=await d.a.post(l.w+"/collect",{type:t,user:i,stack:n,info:o,env:Object.assign({},l.B)});if(0===c.code)return{data:c.data};throw c}catch(t){return{error:t}}},pt=async t=>{await d.a.get(t,void 0,{_proxy:!0,_proxyIgnoreRes:!0})},wt=t=>{const r=JSON.stringify(t),e=(new TextEncoder).encode(r);return new Blob([e],{type:"application/json;charset=utf-8"})},ht=t=>({id:t,time:h.a.fmtTime(Number(t))}),yt=async()=>{try{const t=await d.a.get(l.w+"/sync/list",void 0,{_auth:!0,_proxy:!0});return 0!==t.code?{error:t}:(t.data.auto=t.data.auto.map(ht),t.data.manual=t.data.manual.map(ht),{data:t.data})}catch(t){return{error:t}}},gt=async(t,r,e="all")=>{try{const n=await d.a.get(l.w+"/sync/download_url",{id:t,type:r,keys:e},{_auth:!0});if(0!==n.code)return{error:n};const a=n.data;let o={};const i=await j.a.all(a.map(r=>d.a.get(r.url+"&timestampid="+("latest"===t?Date.now():t),{},{timeout:18e4})));return a.forEach((t,e)=>{const n=t.fileKey;"manual"===r?o=Object.assign(Object.assign({},o),i[e]):"auto"===r&&(o[n]=i[e])}),{data:o}}catch(t){return ft("getSyncDetail",t),{error:t}}},mt=async(t,r="")=>{const e=Object.keys(t).join(",");try{const n=await d.a.get(l.w+"/sync/token",{type:"auto",keys:e},{_auth:!0});if(0!==n.code||!n.data.length)return{error:n};const a=n.data;await j.a.all(a.map(r=>{const{url:e,key:n,token:a,host:o}=r,i=new FormData;return i.append("token",a),i.append("key",e),i.append("file",wt(t[n])),d.a.post(o,i,{headers:{"Content-Type":"multipart/form-data"},timeout:18e4})})),localStorage.setItem("pre-sync-id",a[0].timestamp+"");const o=await d.a.post(l.w+"/sync/done",{type:"auto",websocketkeys:r,keys:e,record_time:a[0].timestamp},{_auth:!0});return 0!==o.code?{error:o}:{data:o.data.map(ht)}}catch(t){return ft("autoBackup",t),{error:t}}},_t=async t=>{try{const r=await d.a.get(l.w+"/sync/token",{type:"manual",keys:"data"},{_auth:!0});if(0!==r.code||!r.data.length)return{error:r};const{token:e,url:n,timestamp:a,host:o}=r.data[0],i=new FormData;i.append("token",e),i.append("key",n),i.append("file",wt(t)),await d.a.post(o,i,{headers:{"Content-Type":"multipart/form-data"},timeout:18e4});const c=await d.a.post(l.w+"/sync/done",{type:"manual",keys:"data",record_time:a},{_auth:!0});return 0!==c.code?{error:c}:{data:c.data.map(ht)}}catch(t){return ft("manualBackup",t),{error:t}}},bt=t=>"pro"===t?async function(){try{const{userInfo:t={}}=await Object(H.b)("store-user"),{uid:r,secret:e}=t,n=await d.a.get(l.v+"/user/recovery-pro",{uid:r,secret:e},{timeout:2e5});if(n.success)return{data:n.data};throw n}catch(t){return ft("getProV1Data",t),{error:t}}}():"basic"===t?async function(){try{const t=await d.a.get(l.w+"/sync/recover_basic",{},{_auth:!0,timeout:2e5});return 0!==t.code?{error:t}:{data:t.data}}catch(t){return ft("getBasicV1Data",t),{error:t}}}():void 0;var vt=e(251)},99:function(t,r,e){var n,a,o,i,c;n=e(347),a=e(252).utf8,o=e(348),i=e(252).bin,(c=function(t,r){t.constructor==String?t=r&&"binary"===r.encoding?i.stringToBytes(t):a.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var e=n.bytesToWords(t),s=8*t.length,u=1732584193,l=-271733879,d=-1732584194,f=271733878,p=0;p<e.length;p++)e[p]=16711935&(e[p]<<8|e[p]>>>24)|4278255360&(e[p]<<24|e[p]>>>8);e[s>>>5]|=128<<s%32,e[14+(s+64>>>9<<4)]=s;var w=c._ff,h=c._gg,y=c._hh,g=c._ii;for(p=0;p<e.length;p+=16){var m=u,_=l,b=d,v=f;u=w(u,l,d,f,e[p+0],7,-680876936),f=w(f,u,l,d,e[p+1],12,-389564586),d=w(d,f,u,l,e[p+2],17,606105819),l=w(l,d,f,u,e[p+3],22,-1044525330),u=w(u,l,d,f,e[p+4],7,-176418897),f=w(f,u,l,d,e[p+5],12,1200080426),d=w(d,f,u,l,e[p+6],17,-1473231341),l=w(l,d,f,u,e[p+7],22,-45705983),u=w(u,l,d,f,e[p+8],7,1770035416),f=w(f,u,l,d,e[p+9],12,-1958414417),d=w(d,f,u,l,e[p+10],17,-42063),l=w(l,d,f,u,e[p+11],22,-1990404162),u=w(u,l,d,f,e[p+12],7,1804603682),f=w(f,u,l,d,e[p+13],12,-40341101),d=w(d,f,u,l,e[p+14],17,-1502002290),u=h(u,l=w(l,d,f,u,e[p+15],22,1236535329),d,f,e[p+1],5,-165796510),f=h(f,u,l,d,e[p+6],9,-1069501632),d=h(d,f,u,l,e[p+11],14,643717713),l=h(l,d,f,u,e[p+0],20,-373897302),u=h(u,l,d,f,e[p+5],5,-701558691),f=h(f,u,l,d,e[p+10],9,38016083),d=h(d,f,u,l,e[p+15],14,-660478335),l=h(l,d,f,u,e[p+4],20,-405537848),u=h(u,l,d,f,e[p+9],5,568446438),f=h(f,u,l,d,e[p+14],9,-1019803690),d=h(d,f,u,l,e[p+3],14,-187363961),l=h(l,d,f,u,e[p+8],20,1163531501),u=h(u,l,d,f,e[p+13],5,-1444681467),f=h(f,u,l,d,e[p+2],9,-51403784),d=h(d,f,u,l,e[p+7],14,1735328473),u=y(u,l=h(l,d,f,u,e[p+12],20,-1926607734),d,f,e[p+5],4,-378558),f=y(f,u,l,d,e[p+8],11,-2022574463),d=y(d,f,u,l,e[p+11],16,1839030562),l=y(l,d,f,u,e[p+14],23,-35309556),u=y(u,l,d,f,e[p+1],4,-1530992060),f=y(f,u,l,d,e[p+4],11,1272893353),d=y(d,f,u,l,e[p+7],16,-155497632),l=y(l,d,f,u,e[p+10],23,-1094730640),u=y(u,l,d,f,e[p+13],4,681279174),f=y(f,u,l,d,e[p+0],11,-358537222),d=y(d,f,u,l,e[p+3],16,-722521979),l=y(l,d,f,u,e[p+6],23,76029189),u=y(u,l,d,f,e[p+9],4,-640364487),f=y(f,u,l,d,e[p+12],11,-421815835),d=y(d,f,u,l,e[p+15],16,530742520),u=g(u,l=y(l,d,f,u,e[p+2],23,-995338651),d,f,e[p+0],6,-198630844),f=g(f,u,l,d,e[p+7],10,1126891415),d=g(d,f,u,l,e[p+14],15,-1416354905),l=g(l,d,f,u,e[p+5],21,-57434055),u=g(u,l,d,f,e[p+12],6,1700485571),f=g(f,u,l,d,e[p+3],10,-1894986606),d=g(d,f,u,l,e[p+10],15,-1051523),l=g(l,d,f,u,e[p+1],21,-2054922799),u=g(u,l,d,f,e[p+8],6,1873313359),f=g(f,u,l,d,e[p+15],10,-30611744),d=g(d,f,u,l,e[p+6],15,-1560198380),l=g(l,d,f,u,e[p+13],21,1309151649),u=g(u,l,d,f,e[p+4],6,-145523070),f=g(f,u,l,d,e[p+11],10,-1120210379),d=g(d,f,u,l,e[p+2],15,718787259),l=g(l,d,f,u,e[p+9],21,-343485551),u=u+m>>>0,l=l+_>>>0,d=d+b>>>0,f=f+v>>>0}return n.endian([u,l,d,f])})._ff=function(t,r,e,n,a,o,i){var c=t+(r&e|~r&n)+(a>>>0)+i;return(c<<o|c>>>32-o)+r},c._gg=function(t,r,e,n,a,o,i){var c=t+(r&n|e&~n)+(a>>>0)+i;return(c<<o|c>>>32-o)+r},c._hh=function(t,r,e,n,a,o,i){var c=t+(r^e^n)+(a>>>0)+i;return(c<<o|c>>>32-o)+r},c._ii=function(t,r,e,n,a,o,i){var c=t+(e^(r|~n))+(a>>>0)+i;return(c<<o|c>>>32-o)+r},c._blocksize=16,c._digestsize=16,t.exports=function(t,r){if(null==t)throw new Error("Illegal argument "+t);var e=n.wordsToBytes(c(t,r));return r&&r.asBytes?e:r&&r.asString?i.bytesToString(e):n.bytesToHex(e)}}}]);